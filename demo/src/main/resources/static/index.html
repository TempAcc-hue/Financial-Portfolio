<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Portfolio Manager - Track your investments with real-time data and beautiful visualizations">
    <title>Portfolio Manager | Dashboard</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- ApexCharts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-brand">
            <span class="brand-icon">üìä</span>
            <span class="brand-text">Portfolio Manager</span>
        </div>
        <div class="nav-links">
            <a href="#dashboard" class="nav-link active">Dashboard</a>
            <a href="#assets" class="nav-link">Assets</a>
            <a href="/swagger-ui.html" class="nav-link" target="_blank">API Docs</a>
            <button id="theme-toggle" class="theme-toggle" title="Toggle theme">
                <span class="theme-icon">üåô</span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Summary Cards Section -->
        <section id="dashboard" class="section">
            <h2 class="section-title">Portfolio Overview</h2>
            <div class="summary-cards">
                <div class="card summary-card total-value">
                    <div class="card-icon">üí∞</div>
                    <div class="card-content">
                        <span class="card-label">Total Value</span>
                        <span id="total-value" class="card-value">$0.00</span>
                    </div>
                </div>
                <div class="card summary-card cost-basis">
                    <div class="card-icon">üìà</div>
                    <div class="card-content">
                        <span class="card-label">Cost Basis</span>
                        <span id="total-cost" class="card-value">$0.00</span>
                    </div>
                </div>
                <div class="card summary-card gain-loss">
                    <div class="card-icon">üíπ</div>
                    <div class="card-content">
                        <span class="card-label">Total Gain/Loss</span>
                        <span id="total-gain-loss" class="card-value">$0.00</span>
                        <span id="gain-loss-percent" class="card-percent">(0.00%)</span>
                    </div>
                </div>
                <div class="card summary-card total-assets">
                    <div class="card-icon">üìã</div>
                    <div class="card-content">
                        <span class="card-label">Total Assets</span>
                        <span id="total-assets" class="card-value">0</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="section charts-section">
            <div class="charts-grid">
                <div class="card chart-card">
                    <h3 class="chart-title">Asset Allocation</h3>
                    <div id="allocation-chart" class="chart-container"></div>
                </div>
                <div class="card chart-card">
                    <h3 class="chart-title">Performance by Type</h3>
                    <div id="performance-chart" class="chart-container"></div>
                </div>
            </div>
        </section>

        <!-- Top Performers Section -->
        <section class="section performers-section">
            <div class="performers-grid">
                <div class="card performer-card">
                    <h3 class="performer-title gainers">üöÄ Top Gainers</h3>
                    <div id="top-gainers" class="performer-list"></div>
                </div>
                <div class="card performer-card">
                    <h3 class="performer-title losers">üìâ Top Losers</h3>
                    <div id="top-losers" class="performer-list"></div>
                </div>
            </div>
        </section>

        <!-- Market News Section -->
        <section class="section news-section">
            <div class="section-header">
                <h2 class="section-title">üì∞ Market News</h2>
                <div class="news-tabs">
                    <button class="news-tab" data-category="forex">Forex</button>
                    <button class="news-tab active" data-category="crypto">Crypto</button>
                    <button class="news-tab" data-category="merger">M&A</button>
                </div>
            </div>
            <div class="news-ticker-container">
                <div id="market-news" class="news-ticker">
                    <div class="news-loading">
                        <div class="loading-spinner"></div>
                        <span>Loading market news...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Assets Table Section -->
        <section id="assets" class="section">
            <div class="section-header">
                <h2 class="section-title">My Assets</h2>
                <div class="section-actions">
                    <select id="asset-filter" class="filter-select">
                        <option value="">All Types</option>
                        <option value="STOCK">Stocks</option>
                        <option value="BOND">Bonds</option>
                        <option value="ETF">ETFs</option>
                        <option value="MUTUAL_FUND">Mutual Funds</option>
                        <option value="CRYPTO">Crypto</option>
                        <option value="REAL_ESTATE">Real Estate</option>
                        <option value="CASH">Cash</option>
                    </select>
                    <div class="action-group">
                        <label class="file-upload" for="csv-file-input">üìÅ</label>
                        <input type="file" id="csv-file-input" accept=".csv" style="display:none">
                        <button id="upload-csv-btn" class="btn btn-secondary" title="Upload CSV">Upload CSV</button>
                        <button id="add-asset-btn" class="btn btn-primary">
                            <span>+</span> Add Asset
                        </button>
                    </div>
                </div>
            </div>
            <div class="card table-card">
                <div class="table-wrapper">
                    <table id="assets-table" class="assets-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="symbol">Symbol <span class="sort-indicator"></span></th>
                                <th class="sortable" data-sort="name">Name <span class="sort-indicator"></span></th>
                                <th class="sortable" data-sort="type">Type <span class="sort-indicator"></span></th>
                                <th class="sortable" data-sort="quantity">Quantity <span class="sort-indicator"></span>
                                </th>
                                <th class="sortable" data-sort="buyPrice">Buy Price <span class="sort-indicator"></span>
                                </th>
                                <th class="sortable" data-sort="currentPrice">Current Price <span
                                        class="sort-indicator"></span></th>
                                <th class="sortable" data-sort="currentValue">Current Value <span
                                        class="sort-indicator"></span></th>
                                <th class="sortable" data-sort="gainLoss">Gain/Loss <span class="sort-indicator"></span>
                                </th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="assets-tbody">
                            <tr class="loading-row">
                                <td colspan="9">
                                    <div class="loading-spinner"></div>
                                    <span>Loading assets...</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- Add/Edit Asset Modal -->
    <div id="asset-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Add New Asset</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <form id="asset-form" class="modal-form">
                <input type="hidden" id="asset-id">

                <div class="form-row">
                    <div class="form-group">
                        <label for="asset-symbol">Symbol *</label>
                        <input type="text" id="asset-symbol" required placeholder="e.g., AAPL" maxlength="20">
                    </div>
                    <div class="form-group">
                        <label for="asset-name">Name *</label>
                        <input type="text" id="asset-name" required placeholder="e.g., Apple Inc." maxlength="100">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="asset-type">Type *</label>
                        <select id="asset-type" required>
                            <option value="">Select type...</option>
                            <option value="STOCK">Stock</option>
                            <option value="BOND">Bond</option>
                            <option value="ETF">ETF</option>
                            <option value="MUTUAL_FUND">Mutual Fund</option>
                            <option value="CRYPTO">Crypto</option>
                            <option value="REAL_ESTATE">Real Estate</option>
                            <option value="CASH">Cash</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="asset-quantity">Quantity *</label>
                        <input type="number" id="asset-quantity" required step="0.0001" min="0.0001" placeholder="0.00">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="asset-buy-price">Buy Price *</label>
                        <input type="number" id="asset-buy-price" required step="0.01" min="0.01" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label for="asset-purchase-date">Purchase Date</label>
                        <input type="date" id="asset-purchase-date">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-btn">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="submit-btn">Save Asset</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>Confirm Delete</h3>
                <button class="modal-close" id="delete-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete <strong id="delete-asset-name"></strong>?</p>
                <p class="text-muted">This action cannot be undone.</p>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="delete-cancel-btn">Cancel</button>
                <button type="button" class="btn btn-danger" id="delete-confirm-btn">Delete</button>
            </div>
        </div>
    </div>

    <!-- Stock News Modal -->
    <div id="stock-news-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3><span id="stock-news-symbol">AAPL</span> - Latest News</h3>
                <button class="modal-close" id="stock-news-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="stock-news-container" class="stock-news-list">
                    <div class="news-loading">
                        <div class="loading-spinner"></div>
                        <span>Loading news...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <span id="toast-message"></span>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/charts.js"></script>
</body>

</html>